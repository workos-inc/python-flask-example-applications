<html>

<head>
    <link rel="stylesheet" href="{{ url_for('static', filename='login.css')}}">
</head>

<body class="container_success">
    <div class="logged_in_div_left flex_column">
        <div class="flex logged_in_div_left_title">
            <div><h2>{{org_name}}</h2></div>
            <div>{{ lucide.icon('settings', stroke_width=1) }}</div>
        </div>
        <hr style="height:0.5px;width:75%;">
        <div class="flex flex_column success-buttons">
            <div class="flex sidebar-button">
                <div>{{ lucide.icon('settings-2', stroke_width=1) }}</div>
                <div>
                    <p>Dashboard</p>
                </div>
            </div>
            <div class="flex sidebar-button">
                <div>{{ lucide.icon('user', stroke_width=1) }}</div>
                <div>
                    <p>User Roles</p>
                </div>
            </div>
            <div class="flex sidebar-button audit-logs">
                <div>{{ lucide.icon('edit', stroke_width=1) }}</div>
                <div>
                    <p>Audit Logs</p>
                </div>
            </div>
            <div class="flex sidebar-button">
                <div>{{ lucide.icon('wrench', stroke_width=1) }}</div>
                <div>
                    <p>Settings</p>
                </div>
            </div>
        </div>
    </div>

    <div class="logged_in_div_right">
        <div class="logged_in_nav">
            <div class="flex">
                <div>
                    <a href="https://workos.com/docs" target="_blank"><button class='button nav-item'>Documentation</button></a>
                </div>
                <div>
                    <a href="https://workos.com/docs/reference" target="_blank"><button class='button nav-item'>API
                        Reference</button></a>
                </div>
                <div>
                    <a href="https://workos.com/blog" target="_blank"><button
                        class='button nav-item blog-nav-button'>Blog</button></a>
                </div>
                <div>
                    <a href="https://workos.com/" target="_blank">
                        <img class="nav-image" src="../static/images/workos_favicon.png" alt="link to workos.com">
                    </a> 
                </div>
            </div>
        </div>
        <div class="flex_column width-40vw logged_in_right_content">
            <div class="flex flex-start width-40vw page-title">
                <div><h2>Audit Logs</h2></div>
            </div>
            <div class="flex card width-40vw space-between ">
                <code class="org-id">{{organization_id}}</code>
                <div>                    
                    <a href="/logout"><button class="button">Change Org</button></a>
                </div>                
            </div>
            <div class="card width-40vw">
                <div class="flex">
                    <div class="flex space-evenly width-40vw margin-b-25">
                        <a href="#send-events"><button data-tab-target="#send-events" class="button active tab">Send Events</button></a>
                    </div>
                    <div class="flex space-evenly width-40vw margin-b-25">
                        <a href="#export-events"><button data-tab-target="#export-events" class="button tab">Export Events</button></a>
                    </div>
                    <div class="flex space-evenly width-40vw margin-b-25">
                        <a href="/events"><button  class="button">Event Stream</button></a>
                    </div>                    
                </div>            
                <hr style="height:0.5px;width:100%;">

                <div class="tab-content">
                    <div id="send-events" data-tab-content class="active">
                      <h1>Send Events</h1>
                      <p>This is the home</p>
                    </div>

                    <div id="export-events" data-tab-content>
                        <form action="{{ url_for('get_events') }}" method="POST">
                            <div class="flex  card">                                                                
                                <div class="flex">
                                    <button class="box" name="event" id="generate_csv" value="generate_csv" type="submit">                            
                                        <div class="flex width-100p">
                                            <p>Generate CSV</p> 
                                        </div>                           
                                    </button>                    
                                    <button class="box" name="event" id="access_csv" value="access_csv" type="submit">                            
                                        <div class="flex width-100p">
                                            <p>Access CSV</p> 
                                        </div>                           
                                    </button> 
                                </div>                    
                            </div>
                        </form>
                    </div>   
                               
                  </div>
                
            </div>
            <div class="card width-40vw">
                <div class="flex space-evenly width-40vw margin-b-25">
                    <div>
                        <div class="button button-outline width-15vw">
                            <a href="https://workos.com/docs/audit-logs" target="_blank"><p>Audit Logs Docs</p></a>                            
                        </div>                    
                    </div>
                    <div>
                        <a href="{{ url_for('export_events') }}">
                            <div class="button button-outline width-15vw">
                                <p>Export Events</p>
                            </div> 
                        </a>                   
                    </div>
                </div>
                <hr style="height:0.5px;width:100%;">
                <form action="{{ url_for('send_event') }}" method="POST">
                    <div class="flex margin-y-15">                                                                
                        <div>
                            <button class="box" name="event" id="user_signed_in" value="0" type="submit" onclick="showSnackbar()">                            
                                <div class="flex width-100p">
                                    <p>User Signed In</p> 
                                </div>                           
                            </button>                    
                            <button class="box" name="event" id="user_logged_out" value="1" type="submit" onclick="showSnackbar()">                            
                                <div class="flex width-100p">
                                    <p>User Logged Out</p> 
                                </div>                           
                            </button> 
                        </div>
                        <div>
                            <button class="box" name="event" id="user_org_deleted" value="2" type="submit" onclick="showSnackbar()">                            
                                <div class="flex width-100p">
                                    <p>User Organization Deleted</p> 
                                </div>                           
                            </button>                    
                            <button class="box" name="event" id="user_connection_deleted" value="3" type="submit" onclick="showSnackbar()">                            
                                <div class="flex width-100p">
                                    <p>User Connection Deleted</p> 
                                </div>                           
                            </button> 
                        </div>
                    </div>
                </form>
            </div>
            <div id="snackbar">Log Event Sent</div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/gh/google/code-prettify@master/loader/run_prettify.js"></script>
    <script>
        function showSnackbar() {
            var x = document.getElementById("snackbar");
            x.className = "show";
            setTimeout(function(){ x.className = x.className.replace("show", ""); }, 500);
        }

        const tabs = document.querySelectorAll('[data-tab-target]')
        const tabContents = document.querySelectorAll('[data-tab-content]')

        tabs.forEach(tab => {
        tab.addEventListener('click', () => {
            const target = document.querySelector(tab.dataset.tabTarget)
            tabContents.forEach(tabContent => {
            tabContent.classList.remove('active')
            })
            tabs.forEach(tab => {
            tab.classList.remove('active')
            })
            tab.classList.add('active')
            target.classList.add('active')
            // console.log(target.id)
            // localStorage.setItem('selectedTab', target.id)
        })
        })
    </script>
</body>

</html>